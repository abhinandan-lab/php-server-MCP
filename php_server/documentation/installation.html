<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installation Guide - PHP Light Framework</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <h3>PHP Light Framework</h3>
            <span class="version">v1.0.0</span>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">ğŸ  Home</a></li>
            <li><a href="installation.html" class="active">ğŸ“¦ Installation</a></li>
            <li><a href="routing.html">ğŸ›£ï¸ Routing</a></li>
            <li><a href="controllers.html">ğŸ›ï¸ Controllers</a></li>
            <li><a href="validation.html">ğŸ”’ Validation & Security</a></li>
            <li><a href="database.html">ğŸ’¾ Database</a></li>
            <li><a href="debugging.html">ğŸ› Debugging</a></li>
            <li><a href="exceptions.html">âš ï¸ Error Handling</a></li>
            <li><a href="examples.html">ğŸ“š Examples</a></li>
            <li><a href="reference.html">ğŸ“– API Reference</a></li>
        </ul>
        <div class="sidebar-footer">
            <a href="/api/docs" target="_blank" class="demo-link">ğŸš€ Live Demo</a>
        </div>
    </nav>

    <main class="content">
        <div class="container">
            <header class="page-header">
                <nav class="breadcrumb">
                    <a href="index.html">Home</a> > Installation
                </nav>
                <h1>ğŸ“¦ Installation Guide</h1>
                <p>Get started with PHP Light Framework in minutes using Docker</p>
            </header>

            <section class="requirements">
                <h2>ğŸ“‹ What You Need</h2>
                <ul>
                    <li><strong>Docker:</strong> 20.10+ with Docker Compose</li>
                    <li><strong>Git:</strong> To download the framework</li>
                    <li><strong>Port Availability:</strong> 80 (web) and 8080 (phpMyAdmin) - <em>can be changed in Dockerfile and docker-compose.yml if needed</em></li>
                </ul>
                
                <div class="alert alert-info">
                    <strong>ğŸ’¡ No Local Setup Required:</strong> PHP, MySQL, and Apache run inside Docker containers - no need to install anything locally!
                </div>
            </section>

            <section class="quick-start">
                <h2>ğŸš€ Quick Start (3 Steps)</h2>
                
                <div class="step">
                    <h3>Step 1: Get the Framework</h3>
                    <pre><code class="language-bash"># Download the framework
git clone https://github.com/yourusername/php-light-framework.git
cd php-light-framework

# Go to the Docker directory
cd docker/</code></pre>
                </div>

                <div class="step">
                    <h3>Step 2: Start Everything</h3>
                    <pre><code class="language-bash"># Start your development environment
docker-compose up</code></pre>
                    
                    <div class="alert alert-success">
                        <strong>âœ… Done!</strong> Docker automatically sets up:
                        <ul>
                            <li>PHP server with all extensions</li>
                            <li>MySQL database with persistent storage</li>
                            <li>phpMyAdmin for database management</li>
                            <li>All framework dependencies</li>
                        </ul>
                    </div>
                </div>

                <div class="step">
                    <h3>Step 3: Access Your Framework</h3>
                    <div class="access-points">
                        <div class="access-card">
                            <h4>ğŸŒ Your API</h4>
                            <p><strong>URL:</strong> <code>http://localhost/api/</code></p>
                            <p>Main API endpoints and framework</p>
                        </div>
                        
                        <div class="access-card">
                            <h4>ğŸ“š Interactive Docs</h4>
                            <p><strong>URL:</strong> <code>http://localhost/api/docs</code></p>
                            <p>Test your APIs with one-click interface</p>
                        </div>
                        
                        <div class="access-card">
                            <h4>ğŸ—„ï¸ Database Manager</h4>
                            <p><strong>URL:</strong> <code>http://localhost:8080</code></p>
                            <p><strong>Login:</strong> root / abcd</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="project-structure">
                <h2>ğŸ“ Your Working Directory</h2>
                <p>Everything you need to build APIs is in the <code>php_server/</code> folder:</p>
                
                <pre><code class="language-text">php_server/                   # ğŸŒ Your main working directory
â”œâ”€â”€ api/                      # ğŸ”§ Framework core - where you build
â”‚   â”œâ”€â”€ controllers/          # ğŸ›ï¸ Your API controllers go here
â”‚   â”œâ”€â”€ core/                 # âš™ï¸ Framework classes (Security, etc.)
â”‚   â”œâ”€â”€ middleware/           # ğŸ›¡ï¸ Security & CORS middleware
â”‚   â”œâ”€â”€ helpers/              # ğŸ”§ Helper functions (pp, ppp, etc.)
â”‚   â”œâ”€â”€ connection.php        # ğŸ—„ï¸ Database connection settings
â”‚   â”œâ”€â”€ index.php             # ğŸšª API entry point
â”‚   â”œâ”€â”€ Router.php            # ğŸ›£ï¸ Route management
â”‚   â”œâ”€â”€ tables                # ğŸ“‹ Your database schema file
â”‚   â””â”€â”€ shortTables           # ğŸ“ Quick schema reference
â”œâ”€â”€ docs/                     # ğŸ“š This documentation you're reading
â”œâ”€â”€ .env                      # âš™ï¸ Environment settings
â””â”€â”€ composer.json             # ğŸ“¦ PHP dependencies</code></pre>
            </section>

            <section class="database-setup">
                <h2>ğŸ—„ï¸ Set Up Your Database</h2>
                
                <div class="step">
                    <h3>Step 1: Create Database</h3>
                    <p>Visit phpMyAdmin at <code>http://localhost:8080</code> (login: root/abcd)</p>
                    <p>Create a new database for your project:</p>
                    <pre><code class="language-sql">-- Click "New" in phpMyAdmin and create database
CREATE DATABASE your_project_name;</code></pre>
                </div>

                <div class="step">
                    <h3>Step 2: Configure Connection</h3>
                    <p>The framework automatically detects if you're in development or production:</p>
                    <pre><code class="language-php">// In php_server/api/connection.php - already configured!
if ($_ENV['APP_ENV'] === 'development') {
    // Uses Docker database automatically
    $config = [
        'host' => 'mysql',
        'database' => 'your_project_name',  // â† Change this
        'username' => 'root',
        'password' => 'abcd'
    ];
}</code></pre>
                </div>

                <div class="step">
                    <h3>Step 3: Add Your Tables</h3>
                    <p>Edit the <code>php_server/api/tables</code> file and add your database schema:</p>
                    <pre><code class="language-sql">-- |--------------------------------------------------------------------------------------------------------
-- Users Table
-- |--------------------------------------------------------------------------------------------------------
DROP TABLE IF EXISTS users;
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Add your other tables here...</code></pre>
                </div>

                <div class="step">
                    <h3>Step 4: Run Migration (One-Click)</h3>
                    <p>Visit <code>http://localhost/api/docs</code> â†’ Navigate to "System" section â†’ Click "run_migration"</p>
                    
                    <div class="alert alert-warning">
                        <strong>âš ï¸ Important:</strong> 
                        <ul>
                            <li>Make sure you created the database first</li>
                            <li>Update the database name in connection.php</li>
                            <li>The migration reads from your <code>api/tables</code> file</li>
                            <li>No file upload needed - just click and run!</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="environment-config">
                <h2>âš™ï¸ Basic Configuration</h2>
                
                <div class="step">
                    <h3>Environment Settings</h3>
                    <p>Your <code>php_server/.env</code> file is pre-configured for development:</p>
                    
                    <pre><code class="language-env"># Development settings - already set up!
APP_ENV=development
DEBUG_MODE=true
SHOW_ERRORS=true

# Database - update the database name
DB_HOST=mysql
DB_NAME=your_project_name  # â† Change this to match your database

# Security - add your frontend domains
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080</code></pre>
                </div>
            </section>

            <section class="test-installation">
                <h2>ğŸ§ª Test Everything Works</h2>
                
                <div class="test-grid">
                    <div class="test-card">
                        <h4>âœ… Framework Running</h4>
                        <p>Visit: <code>http://localhost/api/</code></p>
                        <p>Should show welcome message with framework info</p>
                    </div>
                    
                    <div class="test-card">
                        <h4>âœ… Interactive Docs</h4>
                        <p>Visit: <code>http://localhost/api/docs</code></p>
                        <p>Should show professional API documentation</p>
                    </div>
                    
                    <div class="test-card">
                        <h4>âœ… Database Connection</h4>
                        <p>Visit: <code>http://localhost/api/test</code></p>
                        <p>Should return system info including database status</p>
                    </div>
                </div>
            </section>

            <section class="advanced-information">
                <h2>ğŸ”§ Advanced Information</h2>
                <p>For experienced developers who want to customize the setup:</p>

                <div class="advanced-section">
                    <h3>Port Configuration</h3>
                    <p>Change default ports by editing these files:</p>
                    <pre><code class="language-yaml"># docker-compose.yml
services:
  web:
    ports:
      - "8000:80"  # Change 80 to your preferred port
  phpmyadmin:
    ports:
      - "8081:80"  # Change 8080 to your preferred port</code></pre>
                </div>

                <div class="advanced-section">
                    <h3>Production Deployment</h3>
                    <p>Before deploying to production:</p>
                    <ul>
                        <li>Set <code>'visible' => false</code> for <code>/docs</code> and <code>/run_migration</code> routes in <code>index.php</code></li>
                        <li>Update <code>APP_ENV=production</code> in <code>.env</code></li>
                        <li>Set <code>DEBUG_MODE=false</code> and <code>SHOW_ERRORS=false</code></li>
                        <li>Configure production database credentials</li>
                        <li>Update <code>ALLOWED_ORIGINS</code> with your production domains</li>
                    </ul>
                </div>

                <div class="advanced-section">
                    <h3>Docker Container Customization</h3>
                    <p>Modify <code>web/Dockerfile</code> to add PHP extensions or system packages:</p>
                    <pre><code class="language-dockerfile"># Add PHP extensions
RUN docker-php-ext-install gd imagick

# Add system packages
RUN apt-get update && apt-get install -y \
    git curl libpng-dev</code></pre>
                </div>

                <div class="advanced-section">
                    <h3>Database Persistence</h3>
                    <p>Your database data is stored in Docker volumes and persists between container restarts. To reset completely:</p>
                    <pre><code class="language-bash"># WARNING: This deletes all database data
docker-compose down -v</code></pre>
                </div>
            </section>

            <section class="troubleshooting">
                <h2>ğŸ”§ Troubleshooting</h2>
                
                <div class="issue">
                    <h3>Port Already in Use Error</h3>
                    <p><strong>Problem:</strong> "Port 80 is already allocated"</p>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Stop local web servers (Apache/Nginx): <code>sudo service apache2 stop</code></li>
                        <li>Or change ports in <code>docker-compose.yml</code> as shown in Advanced Information</li>
                        <li>Check what's using the port: <code>sudo lsof -i :80</code></li>
                    </ul>
                </div>

                <div class="issue">
                    <h3>API Returns 500 Error</h3>
                    <p><strong>Problem:</strong> Internal server error when accessing API</p>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Check if <code>.env</code> file exists in <code>php_server/</code></li>
                        <li>Verify database name matches in connection.php and phpMyAdmin</li>
                        <li>Look at container logs: <code>docker-compose logs web</code></li>
                        <li>Ensure Composer dependencies are installed</li>
                    </ul>
                </div>

                <div class="issue">
                    <h3>Database Connection Failed</h3>
                    <p><strong>Problem:</strong> Cannot connect to database</p>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Wait 30-60 seconds for MySQL to fully start (first run takes longer)</li>
                        <li>Verify database exists in phpMyAdmin</li>
                        <li>Check database name in <code>connection.php</code> matches created database</li>
                        <li>Restart containers: <code>docker-compose restart</code></li>
                    </ul>
                </div>

                <div class="issue">
                    <h3>Migration Not Working</h3>
                    <p><strong>Problem:</strong> run_migration endpoint fails</p>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Ensure database exists and is properly configured</li>
                        <li>Check SQL syntax in <code>api/tables</code> file</li>
                        <li>Verify you're accessing <code>/api/docs</code> in development mode</li>
                        <li>Check that <code>'visible' => true</code> for run_migration route</li>
                    </ul>
                </div>
            </section>

            <section class="next-steps">
                <h2>ğŸ¯ You're Ready to Build!</h2>
                <div class="next-links">
                    <a href="routing.html" class="next-link">
                        <strong>ğŸ›£ï¸ Learn Routing</strong>
                        <span>Create your first API endpoints</span>
                    </a>
                    <a href="controllers.html" class="next-link">
                        <strong>ğŸ›ï¸ Build Controllers</strong>
                        <span>Handle requests and responses</span>
                    </a>
                    <a href="/api/docs" target="_blank" class="next-link">
                        <strong>ğŸš€ Try Interactive Docs</strong>
                        <span>Test APIs with the live interface</span>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <script src="assets/script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
